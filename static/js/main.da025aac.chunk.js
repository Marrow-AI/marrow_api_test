(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,A,t){e.exports=t.p+"static/media/logo.38a3ab71.svg"},34:function(e,A){e.exports="data:image/png;base64,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"},35:function(e,A,t){e.exports=t(77)},40:function(e,A,t){},42:function(e,A,t){},44:function(e,A,t){},70:function(e,A){},73:function(e,A,t){},75:function(e,A,t){},77:function(e,A,t){"use strict";t.r(A);var a=t(0),n=t.n(a),g=t(31),o=t.n(g),c=(t(40),t(2)),i=t(3),r=t(5),I=t(4),C=t(6),s=n.a.createContext(),l=function(e){function A(){var e,t;Object(c.a)(this,A);for(var a=arguments.length,n=new Array(a),g=0;g<a;g++)n[g]=arguments[g];return(t=Object(r.a)(this,(e=Object(I.a)(A)).call.apply(e,[this].concat(n)))).state={model:"",setModel:function(e){return t.setState({model:e})},attnGANImg:void 0,setAttnGANImg:function(e){return t.setState({attnGANImg:e})},width:"340",height:"240",showResultCanvas:!1,setShowResultCanvas:function(e){return t.setState({showResultCanvas:e})}},t}return Object(C.a)(A,e),Object(i.a)(A,[{key:"render",value:function(){return n.a.createElement(s.Provider,{value:this.state},this.props.children)}}]),A}(a.Component),E=function(e){return function(A){return n.a.createElement(s.Consumer,null,function(t){return n.a.createElement(e,Object.assign({},A,{context:t}))})}},Q=(t(42),E(function(e){function A(e){var t;return Object(c.a)(this,A),(t=Object(r.a)(this,Object(I.a)(A).call(this,e))).Camera=n.a.createRef(),t}return Object(C.a)(A,e),Object(i.a)(A,[{key:"componentDidMount",value:function(){var e=this,A=this.props.context;navigator.mediaDevices.getUserMedia({video:{width:A.width,height:A.height}}).then(function(A){return e.Camera.current.srcObject=A,A}).catch(function(e){console.log("Something went wrong!",e)})}},{key:"render",value:function(){var e=this.props.context;return n.a.createElement("div",{className:"Camera"},n.a.createElement("video",{playsInline:!0,autoPlay:!0,ref:this.Camera,src:"",width:e.width,height:e.height,id:"cameraElement"}))}}]),A}(a.Component))),B=(t(44),E(function(e){function A(){var e,t;Object(c.a)(this,A);for(var a=arguments.length,n=new Array(a),g=0;g<a;g++)n[g]=arguments[g];return(t=Object(r.a)(this,(e=Object(I.a)(A)).call.apply(e,[this].concat(n)))).renderVideoIntoCanvas=function(){var e=t.props.context,A=document.getElementById("cameraElement"),a=document.getElementById("videoCanvas");a&&(a.getContext("2d").drawImage(A,0,0,e.width,e.height),window.requestAnimationFrame(t.renderVideoIntoCanvas))},t}return Object(C.a)(A,e),Object(i.a)(A,[{key:"componentDidMount",value:function(){window.requestAnimationFrame(this.renderVideoIntoCanvas)}},{key:"render",value:function(){var e=this.props.context,A="none";return e.showResultCanvas&&(A="inline"),n.a.createElement("div",{className:"Canvas"},n.a.createElement("canvas",{width:e.width,height:e.height,id:"videoCanvas"}),n.a.createElement("canvas",{width:e.width,height:e.height,id:"resultCanvas",style:{display:A}}))}}]),A}(a.Component))),u=t(32),m=t.n(u),h=(t(73),E(function(e){function A(){var e,t;Object(c.a)(this,A);for(var a=arguments.length,n=new Array(a),g=0;g<a;g++)n[g]=arguments[g];return(t=Object(r.a)(this,(e=Object(I.a)(A)).call.apply(e,[this].concat(n)))).state={socket:null,inputText:"",loop:!1},t.handleInputChange=function(e){var A=t.props.emit,a=e.target.value;t.state.socket&&t.setState({inputText:a},function(){t.state.socket.emit(A,{caption:a})})},t}return Object(C.a)(A,e),Object(i.a)(A,[{key:"connect",value:function(){var e=this,A=this.props,t=A.url,a=A.name,n=A.context,g=A.emit,o=A.listen;this.setState({socket:m()(t)},function(){e.state.socket.on("connect",function(){console.log("connected to",a)}),e.state.socket.on(o,function(A){if("AttnGAN"===a)n.setAttnGANImg("data:image/jpg;base64,"+A.image);else{var t=document.getElementById("resultCanvas").getContext("2d"),o=new Image;o.onload=function(){t.drawImage(o,0,0,340,240),e.state.loop&&e.state.socket.emit(g,{data:document.getElementById("videoCanvas").toDataURL("image/jpeg")})},o.src="data:image/jpg;base64,"+A.results}})})}},{key:"handleStart",value:function(e){var A=this.state.socket,t=this.props,a=t.context,n=t.emit;a.setShowResultCanvas(e),this.setState({loop:e},function(){e&&A&&(console.log("emit to",n),A.emit("get_pose",{data:document.getElementById("videoCanvas").toDataURL("image/jpeg")}))})}},{key:"render",value:function(){var e=this,A=this.state.inputText,t=this.props,a=t.name,g=t.url,o=t.disable,c=t.context,i=t.receiveData,r=t.emitData,I=t.emit,C=t.listen;return n.a.createElement("div",{className:"Model-Option"},n.a.createElement("input",{type:"radio",name:"",disabled:o,checked:c.model===a,onChange:function(){e.connect(),c.setModel(a)}}),n.a.createElement("h2",null,a),n.a.createElement("a",{href:g,target:"_blank",rel:"noopener noreferrer"},n.a.createElement("code",null,g)),"AttnGAN"===a?n.a.createElement("input",{type:"text",placeholder:"Type something...",className:"Text-Input",value:A,onChange:this.handleInputChange}):n.a.createElement("div",{className:"Model-Buttons"},n.a.createElement("button",{onClick:function(){return e.handleStart(!0)}},"Start"),n.a.createElement("button",{onClick:function(){return e.handleStart(!1)}},"Stop")),n.a.createElement("div",{className:"Model-Socket-Description"},n.a.createElement("div",{className:"Model-Socket-Listeners"},n.a.createElement("p",null,"Socket Event Listener:"),n.a.createElement("code",null,".on('connect')"),n.a.createElement("code",null,".on('",C,"')"),n.a.createElement("p",null,"Receive data format:"),n.a.createElement("code",null,JSON.stringify(i))),n.a.createElement("div",{className:"Model-Socket-Emitter"},n.a.createElement("p",null,"Socket Event Emitters:"),n.a.createElement("code",null,".emit('",I,"')"),n.a.createElement("p",null,"Emit data format:"),n.a.createElement("code",null,JSON.stringify(r)))))}}]),A}(a.Component))),d=(t(75),t(33)),p=t.n(d),v=t(34),y=t.n(v),D=E(function(e){function A(){return Object(c.a)(this,A),Object(r.a)(this,Object(I.a)(A).apply(this,arguments))}return Object(C.a)(A,e),Object(i.a)(A,[{key:"render",value:function(){var e=this.props.context;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"Top"},n.a.createElement("img",{src:p.a,alt:"marrow",className:"Top-Logo"}),n.a.createElement("p",null,"Dev Mode Test"),"AttnGAN"!==e.model?n.a.createElement("div",{className:"CameraAndCanvas"},n.a.createElement(Q,null),n.a.createElement(B,null)):n.a.createElement("div",{className:"CameraAndCanvas"},n.a.createElement("img",{src:e.attnGANImg?e.attnGANImg:y.a,alt:"attngan",width:e.width,height:e.height})),n.a.createElement("div",{className:"Models"},n.a.createElement(h,{name:"DensePose",url:"https://densepose.api.marrow.raycaster.studio/query",emit:"get_pose",listen:"pose_update",receiveData:{results:"<base64Image>"},emitData:{data:"<base64Image>"}}),n.a.createElement(h,{name:"Pix2PixHD",url:"http://107.21.18.29:55000/",emit:"update_request",listen:"update_response",receiveData:{results:"<base64Image>"},emitData:{data:"<base64Image>"}}),n.a.createElement(h,{name:"AttnGAN",url:"https://t2i.api.marrow.raycaster.studio/query",emit:"update_request",listen:"update_response",receiveData:{image:"<base64Image>"},emitData:{caption:"<base64Image>"}}))))}}]),A}(a.Component)),w=function(e){function A(){return Object(c.a)(this,A),Object(r.a)(this,Object(I.a)(A).apply(this,arguments))}return Object(C.a)(A,e),Object(i.a)(A,[{key:"render",value:function(){return n.a.createElement(l,null,n.a.createElement(D,null))}}]),A}(a.Component);o.a.render(n.a.createElement(w,null),document.getElementById("root"))}},[[35,2,1]]]);
//# sourceMappingURL=main.da025aac.chunk.js.map